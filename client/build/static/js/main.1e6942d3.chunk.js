(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{261:function(e,t,n){e.exports=n(497)},298:function(e,t){},300:function(e,t){},332:function(e,t){},333:function(e,t){},377:function(e,t){},379:function(e,t){},402:function(e,t){},497:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(13),o=n(71),s=n(72),c=n(11),l=n(14),u=n(25),p=n(26),h=n(27),d=n(527),m=n(529),f=n(95),g=n(239),y=n.n(g),b=n(530),v=(n(75),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"outer-frame"},a.a.createElement(d.a,{position:"static"},a.a.createElement(m.a,null,a.a.createElement(y.a,{className:"padding-lr"}),a.a.createElement(f.a,{variant:"h6"},"Find properties near your place"))),a.a.createElement(b.a,{className:"inner-frame"},this.props.children))}}]),t}(a.a.Component)),k=n(535),O=n(531),E=n(532),j=n(533),C=n(93),P=n.n(C),D=function e(t,n,r,a,i,o,s){Object(c.a)(this,e),this.name=t,this.longtidude=n,this.latidude=r,this.url=a,this.city=i,this.street=o,this.distance=s},B=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement(O.a,{className:"property-item",button:!0,onClick:function(){e.props.onClick(e.props.property)}},a.a.createElement(E.a,null,a.a.createElement(P.a,null)),a.a.createElement(j.a,{primary:this.props.property.name,secondary:this.props.property.distance}))}}]),t}(a.a.Component),N=n(240),w=n.n(N),S=n(534),I=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(O.a,{className:"property-item"},a.a.createElement(E.a,null,a.a.createElement(w.a,null)),a.a.createElement("input",{className:"search-prop-input",placeholder:"Enter a search term...",onChange:this.props.onChange})),this.displayList())}},{key:"displayList",value:function(){var e=this;return this.props.isPending?a.a.createElement(S.a,null):this.props.hasError?a.a.createElement(f.a,{variant:"subtitle1"},a.a.createElement("label",null,"An error occurred.")):a.a.createElement(k.a,null,this.props.properties.map(function(t){return a.a.createElement(B,{key:e.genKey(t),property:t,onClick:e.props.onClick})}))}},{key:"genKey",value:function(e){return e.name+e.latidude+e.latidude}}]),t}(a.a.Component),_="OPEN_BOOKING_DIALOG",T="COMMIT_BOOKING_PENDING",x="COMMIT_BOOKING_SUCCESS",L="COMMIT_BOOKING_ERROR";function M(e){return{type:_,openedProperty:e}}function F(){return{type:x,pending:!1,error:!1}}var G=n(94),R=n.n(G),K=n(146),A=n(272),J=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"createNewBooking",value:function(){var e=Object(K.a)(R.a.mark(function e(t){return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A({method:"POST",uri:"http://127.0.0.1:8080/users/booking/new",body:t,json:!0});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"findProperties",value:function(){var e=Object(K.a)(R.a.mark(function e(t){var n;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A({method:"POST",uri:"http://127.0.0.1:8080/properties",body:t,json:!0});case 2:return n=e.sent,e.abrupt("return",n.result.map(function(e){return Object.assign(new D,e)}));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),U=function e(t,n,r){Object(c.a)(this,e),this.longtidude=t,this.latidude=n,this.search_query=r},q="FIND_PROPS_PENDING",V="FIND_PROPS_SUCCESS",W="FIND_PROPS_ERROR";function z(){return{type:W,properties:[],pending:!1,error:!0}}var H=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"findProperties",value:function(t,n){e.getGeoLocation(t,function(r){var a=new U(r.coords.longitude,r.coords.latitude,n);e.callFindPropertiesService(t,a)})}},{key:"getGeoLocation",value:function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition(t):e(z())}},{key:"callFindPropertiesService",value:function(e,t){J.findProperties(t).then(function(t){e({type:V,properties:t,pending:!1,error:!1})}).catch(function(t){console.log(t),e(z())}),e({type:q,properties:[],pending:!0,error:!1})}},{key:"createNewBooking",value:function(t,n){e.callCreateNewBookingService(t,n)}},{key:"callCreateNewBookingService",value:function(e,t){J.createNewBooking(t).then(function(t){e(F())}).catch(function(t){e({type:L,pending:!1,error:!0})}),e({type:T,pending:!0,error:!1})}}]),e}(),Q=Object(s.b)(function(e){return{properties:e.findProperties.properties,isPending:e.findProperties.pending,hasError:e.findProperties.error}},function(e){return{onClick:function(t){return e(M(t))},onChange:function(t){return H.findProperties(e,t.target.value)}}})(I),X=n(542),Y=n(539),Z=n(244),$=n(538),ee=n(249),te=n(537),ne=n(241),re=n.n(ne),ae=n(242),ie=n.n(ae),oe=n(243),se=n.n(oe),ce=n(536),le=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(k.a,null,this.genListItem(this.props.property,"name"),this.genListItem(this.props.property,"city"),this.genListItem(this.props.property,"street"),this.genListItem(this.props.property,"distance"),this.genListItem(this.props.property,"url"))}},{key:"genListItem",value:function(e,t){var n=e[t];if(n){var r,i=!1;switch(t){case"name":r=a.a.createElement(P.a,null);break;case"city":case"street":r=a.a.createElement(re.a,null);break;case"distance":r=a.a.createElement(ie.a,null);break;case"url":r=a.a.createElement(se.a,null),i=!0;break;default:r=a.a.createElement(P.a,null)}return a.a.createElement(O.a,null,a.a.createElement(E.a,null,r),i?a.a.createElement(ce.a,{href:n},"More Data"):a.a.createElement(j.a,{primary:n}))}}}]),t}(a.a.Component),ue=function e(t,n,r,a,i,o,s,l,u,p,h,d,m){Object(c.a)(this,e),this.id=t,this.property_id=n,this.property_name=r,this.longtidude=a,this.latidude=i,this.city=o,this.street=s,this.url=l,this.from_date=u,this.to_date=p,m&&(this.user={id:h,name:d,email:m})},pe=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).state=n.getDefaultState(),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"getDefaultState",value:function(){var e=new Date,t=new Date(e.getTime()+864e5);return{bookingButtonClicked:!1,name:"",email:"",fromDate:e,toDate:t}}},{key:"onTextChange",value:function(e){var t=this;return function(n){var r={};r[e]=n.target.value,t.setState(r)}}},{key:"onDateChange",value:function(e){var t=this;return function(n){var r={};r[e]=n,t.setState(r)}}},{key:"onBookingButtonClick",value:function(){this.setState({bookingButtonClicked:!0});var e=new ue("","",this.props.property.name,this.props.property.longtidude,this.props.property.latidude,this.props.property.city,this.props.property.street,this.props.property.url,this.state.fromDate.toISOString(),this.state.toDate.toISOString(),"",this.state.name,this.state.email);this.props.onCommitBooking(e)}},{key:"onDialogClose",value:function(){this.setState(this.getDefaultState()),this.props.onClose()}},{key:"render",value:function(){return this.props.property?a.a.createElement(X.a,{onClose:this.onDialogClose.bind(this),"aria-labelledby":"simple-dialog-title",open:!0},a.a.createElement(b.a,{className:"booking-dialog-holder"},a.a.createElement(le,{property:this.props.property}),a.a.createElement("form",{noValidate:!0,autoComplete:"off"},this.genTextField("name","Name"),this.genTextField("email","E-Mail"),a.a.createElement(Z.b,{utils:ee.a},this.genDatePicker("fromDate","From Date"),this.genDatePicker("toDate","To Date"),this.genCommitBookingButton())))):null}},{key:"genTextField",value:function(e,t){return a.a.createElement(Y.a,{className:"text-field",label:t,margin:"normal",value:this.state[e],onChange:this.onTextChange(e).bind(this)})}},{key:"genDatePicker",value:function(e,t){return a.a.createElement($.a,{disableToolbar:!0,variant:"inline",className:"text-field",format:"dd/MM/yyyy",margin:"normal",label:t,value:this.state[e],onChange:this.onDateChange(e).bind(this)})}},{key:"genCommitBookingButton",value:function(){var e,t=this,n=this.onBookingButtonClick.bind(this);return this.props.isPending?e=a.a.createElement(S.a,null):this.props.hasError?e=a.a.createElement(f.a,{variant:"subtitle1"},a.a.createElement("label",null,"An error occurred. Watch out that the e-mail is valid and that the from date is before the to date")):this.state.bookingButtonClicked&&(n=null,e=a.a.createElement(f.a,{variant:"subtitle1"},a.a.createElement("label",null,"Booking was successful")),setTimeout(function(){return t.onDialogClose()},800)),a.a.createElement("div",null,e,a.a.createElement(te.a,{variant:"contained",color:"primary",className:"text-field book-btn",onClick:n},"Commit booking"))}}]),t}(a.a.Component),he=Object(s.b)(function(e){return{property:e.setBookingDialog.openedProperty,isPending:e.setBookingDialog.pending,hasError:e.setBookingDialog.error}},function(e){return{onClose:function(){e(M(null)),e(F())},onCommitBooking:function(t){H.createNewBooking(e,t)}}})(pe),de=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){H.findProperties(this.props.store.dispatch)}},{key:"render",value:function(){return a.a.createElement(v,null,a.a.createElement(Q,null),a.a.createElement(he,null))}}]),t}(a.a.Component),me={properties:[],pending:!1,error:!1,input:""};var fe={openedProperty:null,pending:!1,error:!1};var ge=Object(o.b)({findProperties:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:case q:case V:return Object.assign({},e,{properties:t.properties,pending:t.pending,error:t.error});default:return e}},setBookingDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object.assign({},e,{openedProperty:t.openedProperty});case T:case L:case x:return Object.assign({},e,{pending:t.pending,error:t.error});default:return e}}}),ye=Object(o.c)(ge);Object(i.render)(a.a.createElement(s.a,{store:ye},a.a.createElement(de,{store:ye})),document.getElementById("root"))},75:function(e,t,n){}},[[261,1,2]]]);
//# sourceMappingURL=main.1e6942d3.chunk.js.map