(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{261:function(e,t,n){e.exports=n(497)},298:function(e,t){},300:function(e,t){},332:function(e,t){},333:function(e,t){},377:function(e,t){},379:function(e,t){},402:function(e,t){},497:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(12),o=n(71),s=n(72),c=n(13),l=n(14),u=n(25),p=n(26),h=n(27),m=n(527),d=n(529),f=n(95),g=n(239),y=n.n(g),b=n(530),v=(n(75),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"outer-frame"},a.a.createElement(m.a,{position:"static"},a.a.createElement(d.a,null,a.a.createElement(y.a,{className:"padding-lr"}),a.a.createElement(f.a,{variant:"h6"},"Find properties near your place"))),a.a.createElement(b.a,{className:"inner-frame"},this.props.children))}}]),t}(a.a.Component)),k=n(535),O=n(531),E=n(532),j=n(533),C=n(93),D=n.n(C),P=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement(O.a,{className:"property-item",button:!0,onClick:function(){e.props.onClick(e.props.property)}},a.a.createElement(E.a,null,a.a.createElement(D.a,null)),a.a.createElement(j.a,{primary:this.props.property.name,secondary:this.props.property.distance}))}}]),t}(a.a.Component),B=n(240),N=n.n(B),S=n(534),w=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(O.a,{className:"property-item"},a.a.createElement(E.a,null,a.a.createElement(N.a,null)),a.a.createElement("input",{className:"search-prop-input",placeholder:"Enter a search term...",onChange:this.props.onChange})),this.displayList())}},{key:"displayList",value:function(){var e=this;return this.props.isPending?a.a.createElement(S.a,null):this.props.hasError?a.a.createElement(f.a,{variant:"subtitle1"},a.a.createElement("label",null,"An error occurred.")):a.a.createElement(k.a,null,this.props.properties.map(function(t){return a.a.createElement(P,{key:e.genKey(t),property:t,onClick:e.props.onClick})}))}},{key:"genKey",value:function(e){return e.name+e.latidude+e.latidude}}]),t}(a.a.Component),I="OPEN_BOOKING_DIALOG",_="COMMIT_BOOKING_PENDING",T="COMMIT_BOOKING_SUCCESS",x="COMMIT_BOOKING_ERROR";function L(e){return{type:I,openedProperty:e}}function M(){return{type:T,pending:!1,error:!1}}var F=n(94),G=n.n(F),R=n(146),K=n(272),A=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"createNewBooking",value:function(){var e=Object(R.a)(G.a.mark(function e(t){return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({method:"POST",uri:"http://127.0.0.1:8080/users/booking/new",body:t,json:!0});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"findProperties",value:function(){var e=Object(R.a)(G.a.mark(function e(t){var n;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({method:"POST",uri:"http://127.0.0.1:8080/properties",body:t,json:!0});case 2:return n=e.sent,e.abrupt("return",n.result);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),J=function e(t,n,r){Object(c.a)(this,e),this.longtidude=t,this.latidude=n,this.search_query=r},U="FIND_PROPS_PENDING",q="FIND_PROPS_SUCCESS",V="FIND_PROPS_ERROR";function W(){return{type:V,properties:[],pending:!1,error:!0}}var z=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"findProperties",value:function(t,n){e.getGeoLocation(t,function(r){var a=new J(r.coords.longitude,r.coords.latitude,n);e.callFindPropertiesService(t,a)})}},{key:"getGeoLocation",value:function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition(t):e(W())}},{key:"callFindPropertiesService",value:function(e,t){A.findProperties(t).then(function(t){e({type:q,properties:t,pending:!1,error:!1})}).catch(function(t){e(W())}),e({type:U,properties:[],pending:!0,error:!1})}},{key:"createNewBooking",value:function(t,n){e.callCreateNewBookingService(t,n)}},{key:"callCreateNewBookingService",value:function(e,t){A.createNewBooking(t).then(function(t){e(M())}).catch(function(t){e({type:x,pending:!1,error:!0})}),e({type:_,pending:!0,error:!1})}}]),e}(),H=Object(s.b)(function(e){return{properties:e.findProperties.properties,isPending:e.findProperties.pending,hasError:e.findProperties.error}},function(e){return{onClick:function(t){return e(L(t))},onChange:function(t){return z.findProperties(e,t.target.value)}}})(w),Q=n(542),X=n(539),Y=n(244),Z=n(538),$=n(249),ee=n(537),te=n(241),ne=n.n(te),re=n(242),ae=n.n(re),ie=n(243),oe=n.n(ie),se=n(536),ce=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(k.a,null,this.genListItem(this.props.property,"name"),this.genListItem(this.props.property,"city"),this.genListItem(this.props.property,"street"),this.genListItem(this.props.property,"distance"),this.genListItem(this.props.property,"url"))}},{key:"genListItem",value:function(e,t){var n=e[t];if(n){var r,i=!1;switch(t){case"name":r=a.a.createElement(D.a,null);break;case"city":case"street":r=a.a.createElement(ne.a,null);break;case"distance":r=a.a.createElement(ae.a,null);break;case"url":r=a.a.createElement(oe.a,null),i=!0;break;default:r=a.a.createElement(D.a,null)}return a.a.createElement(O.a,null,a.a.createElement(E.a,null,r),i?a.a.createElement(se.a,{href:n},"More Data"):a.a.createElement(j.a,{primary:n}))}}}]),t}(a.a.Component),le=function e(t,n,r,a,i,o,s,l,u,p,h,m,d){Object(c.a)(this,e),this.id=t,this.property_id=n,this.property_name=r,this.longtidude=a,this.latidude=i,this.city=o,this.street=s,this.url=l,this.fromDate=u,this.toDate=p,d&&(this.user={id:h,name:m,email:d})},ue=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).state=n.getDefaultState(),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"getDefaultState",value:function(){var e=new Date,t=new Date(e.getTime()+864e5);return{bookingButtonClicked:!1,name:"",email:"",fromDate:e,toDate:t}}},{key:"onTextChange",value:function(e){var t=this;return function(n){var r={};r[e]=n.target.value,t.setState(r)}}},{key:"onDateChange",value:function(e){var t=this;return function(n){var r={};r[e]=n,t.setState(r)}}},{key:"onBookingButtonClick",value:function(){this.setState({bookingButtonClicked:!0});var e=new le("","",this.props.property.name,this.props.property.longtidude,this.props.property.latidude,this.props.property.city,this.props.property.street,this.props.property.url,this.state.fromDate.toISOString(),this.state.toDate.toISOString(),"",this.state.name,this.state.email);this.props.onCommitBooking(e)}},{key:"onDialogClose",value:function(){this.setState(this.getDefaultState()),this.props.onClose()}},{key:"render",value:function(){return this.props.property?a.a.createElement(Q.a,{onClose:this.onDialogClose.bind(this),"aria-labelledby":"simple-dialog-title",open:!0},a.a.createElement(b.a,{className:"booking-dialog-holder"},a.a.createElement(ce,{property:this.props.property}),a.a.createElement("form",{noValidate:!0,autoComplete:"off"},this.genTextField("name","Name"),this.genTextField("email","E-Mail"),a.a.createElement(Y.b,{utils:$.a},this.genDatePicker("fromDate","From Date"),this.genDatePicker("toDate","To Date"),this.genCommitBookingButton())))):null}},{key:"genTextField",value:function(e,t){return a.a.createElement(X.a,{className:"text-field",label:t,margin:"normal",value:this.state[e],onChange:this.onTextChange(e).bind(this)})}},{key:"genDatePicker",value:function(e,t){return a.a.createElement(Z.a,{disableToolbar:!0,variant:"inline",className:"text-field",format:"dd/MM/yyyy",margin:"normal",label:t,value:this.state[e],onChange:this.onDateChange(e).bind(this)})}},{key:"genCommitBookingButton",value:function(){var e,t=this,n=this.onBookingButtonClick.bind(this);return this.props.isPending?e=a.a.createElement(S.a,null):this.props.hasError?e=a.a.createElement(f.a,{variant:"subtitle1"},a.a.createElement("label",null,"An error occurred. Watch out that the e-mail is valid and that the from date is before the to date")):this.state.bookingButtonClicked&&(n=null,e=a.a.createElement(f.a,{variant:"subtitle1"},a.a.createElement("label",null,"Booking was successful")),setTimeout(function(){return t.onDialogClose()},800)),a.a.createElement("div",null,e,a.a.createElement(ee.a,{variant:"contained",color:"primary",className:"text-field book-btn",onClick:n},"Commit booking"))}}]),t}(a.a.Component),pe=Object(s.b)(function(e){return{property:e.setBookingDialog.openedProperty,isPending:e.setBookingDialog.pending,hasError:e.setBookingDialog.error}},function(e){return{onClose:function(){e(L(null)),e(M())},onCommitBooking:function(t){z.createNewBooking(e,t)}}})(ue),he=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){z.findProperties(this.props.store.dispatch)}},{key:"render",value:function(){return a.a.createElement(v,null,a.a.createElement(H,null),a.a.createElement(pe,null))}}]),t}(a.a.Component),me={properties:[],pending:!1,error:!1,input:""};var de={openedProperty:null,pending:!1,error:!1};var fe=Object(o.b)({findProperties:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:case U:case q:return Object.assign({},e,{properties:t.properties,pending:t.pending,error:t.error});default:return e}},setBookingDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object.assign({},e,{openedProperty:t.openedProperty});case _:case x:case T:return Object.assign({},e,{pending:t.pending,error:t.error});default:return e}}}),ge=Object(o.c)(fe);Object(i.render)(a.a.createElement(s.a,{store:ge},a.a.createElement(he,{store:ge})),document.getElementById("root"))},75:function(e,t,n){}},[[261,1,2]]]);
//# sourceMappingURL=main.e2488ffb.chunk.js.map